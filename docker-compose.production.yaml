version: "3"
services:
  indexer:
    image: maximumstock2/indexer:latest
    restart: "always"
    env_file:
      - configuration/environments/.env.production
    environment:
      ENV: "production"
      # disable Postgres sink
      DATABASE_URL:

  trade-api:
    image: maximumstock2/trade-api:latest
    restart: "always"
    env_file:
      - configuration/environments/.env.production
    environment:
      ENV: "production"

  trade-ingest:
    image: maximumstock2/trade-ingest:latest
    restart: "always"
    env_file:
      - configuration/environments/.env.production
    environment:
      ENV: "production"

  reverse-proxy:
    ports:
      - 0.0.0.0:80:80
    env_file:
      - configuration/environments/.env.production

  rabbitmq:
    env_file:
      - configuration/environments/.env.production

  prometheus:
    env_file:
      - configuration/environments/.env.production

  grafana:
    env_file:
      - configuration/environments/.env.production
